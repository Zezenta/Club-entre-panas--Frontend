<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control</title>
    <link rel="stylesheet" href="/ruta/secreta/secretisima/dashboard/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="chat-container">
        <!-- Filtros superiores -->
        <div class="filters">
            <div class="filter-groups">
                <div class="platform-filters">
                    <div class="filter">
                        <span>Facebook</span>
                        <label class="toggle">
                            <input type="checkbox" checked class="platform-toggle" data-platform="facebook">
                            <span class="slider facebook-slider"></span>
                        </label>
                    </div>
                    <div class="filter">
                        <span>Instagram</span>
                        <label class="toggle">
                            <input type="checkbox" checked class="platform-toggle" data-platform="instagram">
                            <span class="slider instagram-slider"></span>
                        </label>
                    </div>
                    <div class="filter" id="whatsapp-toggle">
                        <span>WhatsApp</span>
                        <label class="toggle">
                            <input type="checkbox" checked class="platform-toggle" data-platform="whatsapp">
                            <span class="slider whatsapp-slider"></span>
                        </label>
                    </div>
                    <div class="item-filter">
                        <button class="item-chat">Chats</button>
                        <button class="item-comment">Comentarios</button>
                        <button class="unread-filter-btn">No leídos</button>
                    </div>
                </div>
                <span class="toggle-tag-filters-btn">Mostrar filtros de etiquetas >></span>
                <div class="tag-filters">
                    <div class="filter">
                        <span>Todos</span>
                        <label class="toggle">
                            <input type="radio" name="tag-filter" checked class="tag-toggle" data-tag="all">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="filter">
                        <span>Contraentrega</span>
                        <label class="toggle">
                            <input type="radio" name="tag-filter" class="tag-toggle" data-tag="Contraentrega">
                            <span class="slider contraentrega-slider"></span>
                        </label>
                    </div>
                    <div class="filter">
                        <span>RP</span>
                        <label class="toggle">
                            <input type="radio" name="tag-filter" class="tag-toggle" data-tag="RP">
                            <span class="slider rp-slider"></span>
                        </label>
                    </div>
                    <div class="filter">
                        <span>Delivery</span>
                        <label class="toggle">
                            <input type="radio" name="tag-filter" class="tag-toggle" data-tag="Delivery">
                            <span class="slider delivery-slider"></span>
                        </label>
                    </div>
                    <div class="filter">
                        <span>Terminado</span>
                        <label class="toggle">
                            <input type="radio" name="tag-filter" class="tag-toggle" data-tag="Terminado">
                            <span class="slider terminado-slider"></span>
                        </label>
                    </div>
                    <div class="filter">
                        <span>Sin etiqueta</span>
                        <label class="toggle">
                            <input type="radio" name="tag-filter" class="tag-toggle" data-tag="default">
                            <span class="slider default-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <!-- boton de modal del bot -->
            <button class="bot-config-button">
                <i class="fas fa-cog"></i>
            </button>
        </div>

        <!-- Contenido principal -->
        <div class="main-content">

            <!-- Lista de contactos -->
            <div class="contacts-list"></div>

            <!-- Área de chat -->
            <div class="chat-area">
                <div class="chat-header">
                    <div class="chat-info-container">
                        <h2 class="chat-title"></h2>
                        <a href="#" target="_blank" class="post-link">post link</a>
                    </div>
                    <!-- Toggle encender/apagar bot -->
                    <div class="bot-toggle small">
                        <div class="tag-btn-container">
                            <button class="tag-btn tag-btn--contraentrega">Contraentrega</button>
                            <button class="tag-btn tag-btn--rp">RP</button>
                            <button class="tag-btn tag-btn--delivery">Delivery</button>
                            <button class="tag-btn tag-btn--terminado">Terminado</button>
                        </div>
                        <div class="bot-toggle-options">
                            <span>Bot</span>
                            <label class="toggle">
                                <input type="checkbox" checked class="individual-bot-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Here all the messages appear -->
                <div class="messages"></div>

                <!-- input text to send manual messages -->
                <div class="message-input-container">
                    <input type="text" class="message-input" placeholder="Escribir mensaje">
                    <div class="image-preview-container" style="display: none;">
                        <img src="" alt="Image preview" class="image-preview-thumbnail">
                        <span class="image-preview-filename"></span>
                        <button class="image-preview-cancel-button">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <input type="file" id="image-file-input" accept="image/*" capture="camera" style="display: none;">
                    <div class="attachment-container">
                        <button class="attach-button">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <div class="attachment-menu">
                            <label for="image-file-input" id="upload-image-btn"><i class="fas fa-upload"></i></label>
                            <label for="image-file-input" id="take-photo-btn"><i class="fas fa-camera"></i></label>
                        </div>
                    </div>
                    <button class="send-button">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Botón para mostrar/ocultar contactos en móvil -->
        <button class="toggle-contacts">
            <i class="fas fa-users"></i>
        </button>
    </div>

    <!-- Modal de selección de configuración -->
    <div class="main-config-modal" id="mainConfigModal">
        <div class="main-config-content">
            <div class="main-config-header">
                <h2>Configuración</h2>
                <button class="close-main-config" id="closeMainConfig">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="main-config-options">
                <button class="main-config-option" id="openBotConfig">
                    <i class="fas fa-robot"></i> Configurar Bot
                </button>
                <button class="main-config-option" id="openQuickRepliesConfig">
                    <i class="fas fa-comment-dots"></i> Respuestas Rápidas
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de configuración del bot -->
    <div class="bot-config-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configuración General del Bot</h2>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="bot-modification">
                    <h3>Modificar bot:</h3>
                    <textarea id="bot-behavior" class="bot-textarea"></textarea>
                </div>
                <div class="bot-modification">
                    <h3>Modificar tabla de datos (JSON):</h3>
                    <textarea id="bot-table" class="bot-textarea"></textarea>
                </div>
                <div class="bot-modification">
                    <h3>Modificar prompt de comentarios:</h3>
                    <textarea id="bot-comments-prompt" class="bot-textarea"></textarea>
                </div>
                <div class="modal-token-container">
                    <div class="token-usage">
                        <p>Uso total de tokens: x</p>
                    </div>
                    <div class="modal-actions">
                        <button class="modal-button cancel-button">Cancelar</button>
                        <button class="modal-button save-button">Guardar cambios</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Respuestas Rápidas -->
    <div class="quick-replies-modal" id="quickRepliesModal">
        <div class="quick-replies-content">
            <div class="quick-replies-header">
                <h2>Respuestas Rápidas</h2>
                <button class="close-quick-replies" id="closeQuickReplies">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="quick-replies-list"></div>
            
            <button class="add-quick-reply-btn" id="openCreateQuickReply">
                <i class="fas fa-plus"></i> Crear nueva respuesta rápida
            </button>
        </div>
        <!-- Modal para crear nueva respuesta rápida -->
        <div class="create-quick-reply-modal" id="createQuickReplyModal">
            <div class="create-quick-reply-content">
                <h3>Nueva respuesta rápida</h3>
                <textarea class="quick-reply-textarea" placeholder="Escribe tu respuesta rápida aquí..."></textarea>
                <div class="create-quick-reply-actions">
                    <button class="cancel-create-quick-reply" id="cancelCreateQuickReply">Cancelar</button>
                    <button class="save-create-quick-reply">Crear</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Fin modal respuestas rápidas -->

    <!-- Modal de confirmación para eliminar -->
    <div class="delete-confirmation-modal" id="deleteConfirmationModal">
        <div class="delete-confirmation-content">
            <p id="deleteConfirmationText"></p>
            <div class="delete-confirmation-actions">
                <button id="cancelDeleteBtn">Cancelar</button>
                <button id="confirmDeleteBtn">Eliminar</button>
            </div>
        </div>
    </div>
    <!-- Fin modal respuestas rápidas -->
    <script type="module" src="/ruta/secreta/secretisima/socket.io/socket.io.js"></script>
    <script type="module" src="/ruta/secreta/secretisima/dashboard/ui.js"></script>
    <script type="module" src="/ruta/secreta/secretisima/dashboard/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
</body>
</html>